<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.33">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/logo.png"><title>Golang Study | 冰龍與雪風的工作室</title><meta name="description" content="Golang Study">
    <link rel="modulepreload" href="/assets/app.abe8b9ac.js"><link rel="modulepreload" href="/assets/golang-study.html.7006911b.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/golang-study.html.28888961.js">
    <link rel="stylesheet" href="/assets/style.fc8b2427.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/logo.png" alt="冰龍與雪風的工作室"><span class="site-name can-hide">冰龍與雪風的工作室</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="文章"><span class="title">文章</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="文章"><span class="title">文章</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>编程</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/programming/programming-languages/" class="router-link-active" aria-label="编程语言"><!--[--><!--]--> 编程语言 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/programming/front-back-connect/" class="" aria-label="前后端连接"><!--[--><!--]--> 前后端连接 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/programming/front-technology/" class="" aria-label="前端技术"><!--[--><!--]--> 前端技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/programming/back-technology/" class="" aria-label="后端技术"><!--[--><!--]--> 后端技术 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>马克思主义</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/programming/programming-languages/go/golang-study.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/languages/ja/" class="" aria-label="日本語"><!--[--><!--]--> 日本語 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/SetsuikiHyoryu/blog-source" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="文章"><span class="title">文章</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="文章"><span class="title">文章</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>编程</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/programming/programming-languages/" class="router-link-active" aria-label="编程语言"><!--[--><!--]--> 编程语言 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/programming/front-back-connect/" class="" aria-label="前后端连接"><!--[--><!--]--> 前后端连接 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/programming/front-technology/" class="" aria-label="前端技术"><!--[--><!--]--> 前端技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/programming/back-technology/" class="" aria-label="后端技术"><!--[--><!--]--> 后端技术 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>马克思主义</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/programming/programming-languages/go/golang-study.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/languages/ja/" class="" aria-label="日本語"><!--[--><!--]--> 日本語 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/SetsuikiHyoryu/blog-source" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/programming/programming-languages/" class="router-link-active sidebar-item sidebar-heading" aria-label="上一级"><!--[--><!--]--> 上一级 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="Golang Study"><!--[--><!--]--> Golang Study <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#教程地址" class="router-link-active router-link-exact-active sidebar-item" aria-label="教程地址"><!--[--><!--]--> 教程地址 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#远程仓库" class="router-link-active router-link-exact-active sidebar-item" aria-label="远程仓库"><!--[--><!--]--> 远程仓库 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#环境搭建" class="router-link-active router-link-exact-active sidebar-item" aria-label="环境搭建"><!--[--><!--]--> 环境搭建 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#官网" class="router-link-active router-link-exact-active sidebar-item" aria-label="官网"><!--[--><!--]--> 官网 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#vscode" class="router-link-active router-link-exact-active sidebar-item" aria-label="VSCode"><!--[--><!--]--> VSCode <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#创建-go-文件" class="router-link-active router-link-exact-active sidebar-item" aria-label="创建 go 文件"><!--[--><!--]--> 创建 go 文件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#package-function" class="router-link-active router-link-exact-active sidebar-item" aria-label="package &amp; function"><!--[--><!--]--> package &amp; function <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#格式化打印" class="router-link-active router-link-exact-active sidebar-item" aria-label="格式化打印"><!--[--><!--]--> 格式化打印 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#声明变量" class="router-link-active router-link-exact-active sidebar-item" aria-label="声明变量"><!--[--><!--]--> 声明变量 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#复数声明" class="router-link-active router-link-exact-active sidebar-item" aria-label="复数声明"><!--[--><!--]--> 复数声明 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#循环与分支" class="router-link-active router-link-exact-active sidebar-item" aria-label="循环与分支"><!--[--><!--]--> 循环与分支 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#strings-contains" class="router-link-active router-link-exact-active sidebar-item" aria-label="strings.Contains"><!--[--><!--]--> strings.Contains <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#switch" class="router-link-active router-link-exact-active sidebar-item" aria-label="switch"><!--[--><!--]--> switch <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#for" class="router-link-active router-link-exact-active sidebar-item" aria-label="for"><!--[--><!--]--> for <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="类型"><!--[--><!--]--> 类型 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#实数" class="router-link-active router-link-exact-active sidebar-item" aria-label="实数"><!--[--><!--]--> 实数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#多语言文本" class="router-link-active router-link-exact-active sidebar-item" aria-label="多语言文本"><!--[--><!--]--> 多语言文本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#类形转换" class="router-link-active router-link-exact-active sidebar-item" aria-label="类形转换"><!--[--><!--]--> 类形转换 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#声明新类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="声明新类型"><!--[--><!--]--> 声明新类型 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="函数"><!--[--><!--]--> 函数 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="方法"><!--[--><!--]--> 方法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#声明函数类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="声明函数类型"><!--[--><!--]--> 声明函数类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#闭包" class="router-link-active router-link-exact-active sidebar-item" aria-label="闭包"><!--[--><!--]--> 闭包 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#数组" class="router-link-active router-link-exact-active sidebar-item" aria-label="数组"><!--[--><!--]--> 数组 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#使用复合字面值初始化数组" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用复合字面值初始化数组"><!--[--><!--]--> 使用复合字面值初始化数组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#遍历数组" class="router-link-active router-link-exact-active sidebar-item" aria-label="遍历数组"><!--[--><!--]--> 遍历数组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#数组的复制" class="router-link-active router-link-exact-active sidebar-item" aria-label="数组的复制"><!--[--><!--]--> 数组的复制 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#切片" class="router-link-active router-link-exact-active sidebar-item" aria-label="切片"><!--[--><!--]--> 切片 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#忽略索引" class="router-link-active router-link-exact-active sidebar-item" aria-label="忽略索引"><!--[--><!--]--> 忽略索引 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#切片的复合字面值" class="router-link-active router-link-exact-active sidebar-item" aria-label="切片的复合字面值"><!--[--><!--]--> 切片的复合字面值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#append-函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="append 函数"><!--[--><!--]--> append 函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#容量" class="router-link-active router-link-exact-active sidebar-item" aria-label="容量"><!--[--><!--]--> 容量 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#使用-make-函数预置切片" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 make 函数预置切片"><!--[--><!--]--> 使用 make 函数预置切片 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#map" class="router-link-active router-link-exact-active sidebar-item" aria-label="map"><!--[--><!--]--> map <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#声明-map" class="router-link-active router-link-exact-active sidebar-item" aria-label="声明 map"><!--[--><!--]--> 声明 map <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#向-map-赋值" class="router-link-active router-link-exact-active sidebar-item" aria-label="向 map 赋值"><!--[--><!--]--> 向 map 赋值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#判断值是否存在" class="router-link-active router-link-exact-active sidebar-item" aria-label="判断值是否存在"><!--[--><!--]--> 判断值是否存在 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#删除-map-中的项目" class="router-link-active router-link-exact-active sidebar-item" aria-label="删除 map 中的项目"><!--[--><!--]--> 删除 map 中的项目 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#计数器案例" class="router-link-active router-link-exact-active sidebar-item" aria-label="计数器案例"><!--[--><!--]--> 计数器案例 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#结构类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="结构类型"><!--[--><!--]--> 结构类型 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#声明结构体" class="router-link-active router-link-exact-active sidebar-item" aria-label="声明结构体"><!--[--><!--]--> 声明结构体 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#将结构体编码为-json" class="router-link-active router-link-exact-active sidebar-item" aria-label="将结构体编码为 JSON"><!--[--><!--]--> 将结构体编码为 JSON <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#关联方法至结构体" class="router-link-active router-link-exact-active sidebar-item" aria-label="关联方法至结构体"><!--[--><!--]--> 关联方法至结构体 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#结构体的嵌入-embedded" class="router-link-active router-link-exact-active sidebar-item" aria-label="结构体的嵌入（embedded）"><!--[--><!--]--> 结构体的嵌入（embedded） <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#接口" class="router-link-active router-link-exact-active sidebar-item" aria-label="接口"><!--[--><!--]--> 接口 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#指针-pointer" class="router-link-active router-link-exact-active sidebar-item" aria-label="指针（pointer）"><!--[--><!--]--> 指针（pointer） <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#隐式指针" class="router-link-active router-link-exact-active sidebar-item" aria-label="隐式指针"><!--[--><!--]--> 隐式指针 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#错误处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="错误处理"><!--[--><!--]--> 错误处理 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#其他语言中的异常与-go-的错误值的比较" class="router-link-active router-link-exact-active sidebar-item" aria-label="其他语言中的异常与 go 的错误值的比较"><!--[--><!--]--> 其他语言中的异常与 go 的错误值的比较 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#创建-panic" class="router-link-active router-link-exact-active sidebar-item" aria-label="创建 panic"><!--[--><!--]--> 创建 panic <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#并发-concurrent-calculation" class="router-link-active router-link-exact-active sidebar-item" aria-label="并发（Concurrent Calculation）"><!--[--><!--]--> 并发（Concurrent Calculation） <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#goroutine" class="router-link-active router-link-exact-active sidebar-item" aria-label="goroutine"><!--[--><!--]--> goroutine <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#通道" class="router-link-active router-link-exact-active sidebar-item" aria-label="通道"><!--[--><!--]--> 通道 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/programming/programming-languages/go/golang-study.html#互斥锁-mutex" class="router-link-active router-link-exact-active sidebar-item" aria-label="互斥锁（mutex）"><!--[--><!--]--> 互斥锁（mutex） <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="golang-study" tabindex="-1"><a class="header-anchor" href="#golang-study" aria-hidden="true">#</a> Golang Study</h1><h2 id="教程地址" tabindex="-1"><a class="header-anchor" href="#教程地址" aria-hidden="true">#</a> 教程地址</h2><p><a href="https://www.bilibili.com/video/BV1fD4y1m7TD" target="_blank" rel="noopener noreferrer">Go语言编程快速入门（Golang）（完结）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="远程仓库" tabindex="-1"><a class="header-anchor" href="#远程仓库" aria-hidden="true">#</a> 远程仓库</h2><p><a href="https://github.com/SetsuikiHyoryu/go_study" target="_blank" rel="noopener noreferrer">https://github.com/SetsuikiHyoryu/go_study<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="环境搭建" tabindex="-1"><a class="header-anchor" href="#环境搭建" aria-hidden="true">#</a> 环境搭建</h2><h3 id="官网" tabindex="-1"><a class="header-anchor" href="#官网" aria-hidden="true">#</a> 官网</h3><ul><li>境外：<a href="https://go.dev/" target="_blank" rel="noopener noreferrer">https://go.dev/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li>境内：<a href="https://golang.google.cn" target="_blank" rel="noopener noreferrer">https://golang.google.cn<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><p>※ 注意需要配置 GOPATH</p><h3 id="vscode" tabindex="-1"><a class="header-anchor" href="#vscode" aria-hidden="true">#</a> VSCode</h3><ol><li>安装 <code>golang.go</code> 插件</li><li>执行 <code>&gt;go install/update Tools</code> 命令 <ul><li>安装目录为 <code>GOPATH</code></li></ul></li></ol><h4 id="定制对-go-后缀文件的操作" tabindex="-1"><a class="header-anchor" href="#定制对-go-后缀文件的操作" aria-hidden="true">#</a> 定制对 go 后缀文件的操作</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;[go]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 不将制表符转换为空格</span>
  <span class="token property">&quot;editor.insertSpaces&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 制表符所占大小为 4 个空格的宽度</span>
  <span class="token property">&quot;editor.tabSize&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  <span class="token comment">// 设置默认的格式化工具为 goloang.go</span>
  <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;golang.go&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="创建-go-文件" tabindex="-1"><a class="header-anchor" href="#创建-go-文件" aria-hidden="true">#</a> 创建 go 文件</h2><table><thead><tr><th>名称</th><th>内容</th></tr></thead><tbody><tr><td>后缀</td><td>go</td></tr><tr><td>编译并运行</td><td>go run &lt;filename&gt;</td></tr></tbody></table><h2 id="package-function" tabindex="-1"><a class="header-anchor" href="#package-function" aria-hidden="true">#</a> package &amp; function</h2><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// main.go</span>

<span class="token comment">// 声明代码所在的包</span>
<span class="token keyword">package</span> main

<span class="token comment">// 指明代码所需的包</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;fmt&quot;</span> <span class="token comment">// 包中包含很多函数</span>
<span class="token punctuation">)</span>

<span class="token comment">// main 函数是 go 语言的入口函数，如果不定义就会报错</span>
<span class="token comment">// 左大括号必须和 func 在同一行，否则报错</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="格式化打印" tabindex="-1"><a class="header-anchor" href="#格式化打印" aria-hidden="true">#</a> 格式化打印</h2><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 `fmt.Printf`，第一个参数必须是字符串。</span>
    <span class="token comment">// 接受如 `%v` 的格式化动词，它的值将由第二个参数替换。</span>
    <span class="token comment">// 传入复数格式化动词时，值将由后续参数按顺序替换。</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v&#39;s height is %vcm\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shamare&quot;</span><span class="token punctuation">,</span> <span class="token number">138</span><span class="token punctuation">)</span>
    
    <span class="token comment">// 前置数字可以向左右填充空格以自动对齐，负右正左。</span>
    <span class="token comment">// 文字超出指定数填充数时将不填充一部分。</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-10v $%4vcm\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;shamare&quot;</span><span class="token punctuation">,</span> <span class="token number">138</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-10v $%4vcm\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sora&quot;</span><span class="token punctuation">,</span> <span class="token number">155</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run main<span class="token punctuation">.</span>go
shamare&#39;s height is 138cm
shamare    $ 138cm
sora       $ 155cm
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="声明变量" tabindex="-1"><a class="header-anchor" href="#声明变量" aria-hidden="true">#</a> 声明变量</h2><table><thead><tr><th>名称</th><th>关键字</th><th>说明</th></tr></thead><tbody><tr><td>常量</td><td>const</td><td>值不可改变</td></tr><tr><td>变量</td><td>var</td><td>值可改变</td></tr><tr><td>变量短声明</td><td>:=</td><td>不可以用来定义全局变量</td></tr></tbody></table><h3 id="复数声明" tabindex="-1"><a class="header-anchor" href="#复数声明" aria-hidden="true">#</a> 复数声明</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>


<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
    <span class="token comment">// 复数声明的方式</span>
    <span class="token keyword">var</span><span class="token punctuation">(</span>
        shamare <span class="token operator">=</span> <span class="token string">&quot;shamare&quot;</span>
        shamareHeight <span class="token operator">=</span> <span class="token number">138</span>
    <span class="token punctuation">)</span>
    
    <span class="token comment">// 方式二</span>
    <span class="token keyword">var</span> suzuran<span class="token punctuation">,</span> suzuranHeight <span class="token operator">=</span> <span class="token string">&quot;suzuran&quot;</span><span class="token punctuation">,</span> <span class="token number">137</span>
    
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>shamare<span class="token punctuation">,</span> shamareHeight<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>suzuran<span class="token punctuation">,</span> suzuranHeight<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="循环与分支" tabindex="-1"><a class="header-anchor" href="#循环与分支" aria-hidden="true">#</a> 循环与分支</h2><ul><li>条件不需要括号</li><li>空字符串不可作为判断条件</li><li><code>switch</code> 和 <code>if</code> 的条件所用到的变量可以在判断语句中声明 <ul><li>仅可使用 <code>:=</code> 的形式</li></ul></li></ul><h3 id="strings-contains" tabindex="-1"><a class="header-anchor" href="#strings-contains" aria-hidden="true">#</a> strings.Contains</h3><p>判断参数一的字符串中是否包含参数二的字符串</p><h3 id="switch" tabindex="-1"><a class="header-anchor" href="#switch" aria-hidden="true">#</a> switch</h3><ul><li><code>switch</code> 的 <code>case</code> 可以填复数值，用 <code>,</code> 分隔</li><li><code>case</code> 不用相对于 <code>switch</code> 缩进</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> operator <span class="token operator">=</span> <span class="token string">&quot;shamare&quot;</span>
    
    <span class="token keyword">switch</span> operator <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;sora&quot;</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;sora is a bunny.&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token string">&quot;shamare&quot;</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;shamare is a fox.&quot;</span><span class="token punctuation">)</span>
        <span class="token comment">// 使用此关键字可执行下一 case 中的代码</span>
        <span class="token keyword">fallthrough</span>
    <span class="token keyword">case</span> <span class="token string">&quot;suzuran&quot;</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;suzuran is a fox.&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token string">&quot;rope&quot;</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;rope is a bunny.&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run <span class="token keyword">switch</span><span class="token punctuation">.</span>go
shamare is a fox<span class="token punctuation">.</span>
suzuran is a fox<span class="token punctuation">.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="for" tabindex="-1"><a class="header-anchor" href="#for" aria-hidden="true">#</a> for</h3><ul><li>for 之后不跟条件即为无限循环</li><li>可以用 <code>break</code> 手动跳出循环</li><li>只写一个式子默认为是第二区域的式子</li></ul><h2 id="类型" tabindex="-1"><a class="header-anchor" href="#类型" aria-hidden="true">#</a> 类型</h2><h3 id="实数" tabindex="-1"><a class="header-anchor" href="#实数" aria-hidden="true">#</a> 实数</h3><h4 id="浮点数" tabindex="-1"><a class="header-anchor" href="#浮点数" aria-hidden="true">#</a> 浮点数</h4><ul><li>浮点型默认为 <code>float64</code></li><li>32 为单精度（4 字节）；64 为双精度（8 字节） <ul><li>处理诸如 3D 游戏中的大量数据时，可以牺牲精度节省内存</li></ul></li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;math&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 浮点型格式化动词</span>
    floatSample <span class="token operator">:=</span> <span class="token number">1.0</span> <span class="token operator">/</span> <span class="token number">3</span>
    
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;v: %v\n&quot;</span><span class="token punctuation">,</span> floatSample<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;f: %f\n&quot;</span><span class="token punctuation">,</span> floatSample<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;.3f: %.3f\n&quot;</span><span class="token punctuation">,</span> floatSample<span class="token punctuation">)</span>

    <span class="token comment">// 宽度.精度。此处意为宽度 4，精度为保留 2 位</span>
    <span class="token comment">// 宽度大于数字长度时，左边填充空格；不指定宽度时，按实际长度显示</span>
    <span class="token comment">// 如果要填充零，可以写作 `%04.2f`</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;4.2f: %4.2f\n&quot;</span><span class="token punctuation">,</span> floatSample<span class="token punctuation">)</span>
    
    <span class="token comment">// 比较浮点型</span>
    piggyBank <span class="token operator">:=</span> <span class="token number">0.1</span>
    piggyBank <span class="token operator">+=</span> <span class="token number">0.2</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>piggyBank <span class="token operator">==</span> <span class="token number">0.3</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
    <span class="token comment">// 正确比较方式</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>piggyBank<span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.0001</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run realNumber<span class="token punctuation">.</span>go 
v: 0<span class="token punctuation">.</span>3333333333333333
f: 0<span class="token punctuation">.</span>333333
<span class="token punctuation">.</span>3f: 0<span class="token punctuation">.</span>333
4<span class="token punctuation">.</span>2f: 0<span class="token punctuation">.</span>33
false
true
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="整数" tabindex="-1"><a class="header-anchor" href="#整数" aria-hidden="true">#</a> 整数</h4><h5 id="十种整数类型-本质是八种" tabindex="-1"><a class="header-anchor" href="#十种整数类型-本质是八种" aria-hidden="true">#</a> 十种整数类型（本质是八种）</h5><table><thead><tr><th>Type</th><th>Range</th><th>Storage</th></tr></thead><tbody><tr><td>int8</td><td>-128 - 127</td><td>8-bit(one byte)</td></tr><tr><td>uint8</td><td>0 - 255</td><td>8-bit(one byte)</td></tr><tr><td>int16</td><td>-32,768 - 32767</td><td>16-bit(two bytes)</td></tr><tr><td>uint16</td><td>0 - 65535</td><td>16-bit(two bytes)</td></tr><tr><td>int32</td><td>-2,147,483,648 - 2147,483,647</td><td>32-bit(four bytes)</td></tr><tr><td>uint32</td><td>0 - 4,294,967,295</td><td>32-bit(four bytes)</td></tr><tr><td>int64</td><td>-9,223,372,036,854,775,808 - 9,223,372,036,854,775,807</td><td>64-bit(eight bytes)</td></tr><tr><td>uint64</td><td>0 - 18,446,644,073,709,551,615</td><td>64-bit(eight bytes)</td></tr></tbody></table><p>※ int, uint 在老的移动设备上是 32 位，在新的计算机上是 64 位。</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// int 五种有负数的整数之一</span>
	year <span class="token operator">:=</span> <span class="token number">2022</span>
    <span class="token comment">// uint 五种没有负数的整数之一</span>
	<span class="token keyword">var</span> month <span class="token builtin">uint</span> <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token comment">// %T 可以打印数据类型</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T 年 %T 月\n&quot;</span><span class="token punctuation">,</span> year<span class="token punctuation">,</span> month<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d 年 %d 月\n&quot;</span><span class="token punctuation">,</span> year<span class="token punctuation">,</span> month<span class="token punctuation">)</span>
    
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment">// 使用 uint8 表示颜色</span>
    <span class="token keyword">var</span> red<span class="token punctuation">,</span> green<span class="token punctuation">,</span> blue <span class="token builtin">uint8</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">141</span><span class="token punctuation">,</span> <span class="token number">213</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>red<span class="token punctuation">,</span> green<span class="token punctuation">,</span> blue<span class="token punctuation">)</span>
    <span class="token comment">// 十六进制表示法</span>
    <span class="token keyword">var</span> red16<span class="token punctuation">,</span> green16<span class="token punctuation">,</span> blue16 <span class="token builtin">uint8</span> <span class="token operator">=</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x8d</span><span class="token punctuation">,</span> <span class="token number">0xd5</span>
    <span class="token comment">// 用 0 填充，最小宽度为 2</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;color: #%02x%02x%02x\n&quot;</span><span class="token punctuation">,</span> red16<span class="token punctuation">,</span> green16<span class="token punctuation">,</span> blue16<span class="token punctuation">)</span>
    
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;===&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment">// 整数环绕（最大值时进位时超出内存，所以变为了 0）</span>
    <span class="token keyword">var</span> number <span class="token builtin">uint8</span> <span class="token operator">=</span> <span class="token number">255</span>
    number<span class="token operator">++</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    
    <span class="token keyword">var</span> number02 <span class="token builtin">int8</span> <span class="token operator">=</span> <span class="token number">127</span>
    <span class="token comment">// %b 打印 bit</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b: &quot;</span><span class="token punctuation">,</span> number02<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>number02<span class="token punctuation">)</span>
    number02<span class="token operator">++</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08b: &quot;</span><span class="token punctuation">,</span> number02<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>number02<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run integer<span class="token punctuation">.</span>go
int 年 uint 月
2022 年 2 月
===
0 141 213
color: <span class="token comment">#008dd5</span>
===
0
01111111: 127
<span class="token operator">-</span>10000000: <span class="token operator">-</span>128
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="big" tabindex="-1"><a class="header-anchor" href="#big" aria-hidden="true">#</a> big</h5><ul><li>使用 big.Int 进行运算时，等式中的其他部分都必须是 big.Int</li><li><code>NewInt()</code> 函数可以把 <code>int64</code> 转化为 <code>big.Int</code> 类型</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;math/big&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 指数的值如果不主动声明类型则类型为 float64</span>
	<span class="token keyword">var</span> distance <span class="token operator">=</span> <span class="token number">24e18</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>distance<span class="token punctuation">)</span>

	<span class="token comment">// 使用 big 包</span>
	distance02 <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>big<span class="token punctuation">.</span>Int<span class="token punctuation">)</span>
	distance02<span class="token punctuation">.</span><span class="token function">SetString</span><span class="token punctuation">(</span><span class="token string">&quot;24000000000000000000&quot;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>distance02<span class="token punctuation">)</span>

	<span class="token comment">// 常量可以无类型（untype）</span>
	<span class="token keyword">const</span> distance03 <span class="token operator">=</span> <span class="token number">24000000000000000000000000</span>
	<span class="token comment">// 程序中的每个字面值都是常量</span>
	<span class="token comment">// 针对字面值的常量的计算在编译阶段即完成</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">24000000000000000000000000</span> <span class="token operator">/</span> <span class="token number">299792</span> <span class="token operator">/</span> <span class="token number">86400</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run bigPackage<span class="token punctuation">.</span>go 
2<span class="token punctuation">.</span>4e+19
24000000000000000000
926568346646267
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="多语言文本" tabindex="-1"><a class="header-anchor" href="#多语言文本" aria-hidden="true">#</a> 多语言文本</h3><ul><li>字符串字面值：<code>&quot;\n&quot;</code>，即可以包含转义。</li><li>原始字符串字面值：`\n`</li></ul><table><thead><tr><th>名称</th><th>含义</th></tr></thead><tbody><tr><td>字符</td><td>比如 65 代表 A 字符</td></tr><tr><td>code point</td><td>Unicode 联盟为超过 100 万个字符分配了相应的数值，这个数叫作 code point</td></tr><tr><td>rune</td><td>为了表示 unicode code point，go 语言提供的 int32 的类型别名</td></tr><tr><td>byte</td><td>uint8 的类型别名，目的是用于二进制数</td></tr></tbody></table><h4 id="类型别名" tabindex="-1"><a class="header-anchor" href="#类型别名" aria-hidden="true">#</a> 类型别名</h4><p><code>type byte = uint8</code></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 任何整数类型都可以使用 `%c` 打印字符，但是 `rune` 可以指明该数值是用来表示一个字符</span>
	<span class="token keyword">var</span> pi <span class="token builtin">rune</span> <span class="token operator">=</span> <span class="token number">960</span>
	<span class="token keyword">var</span> alpha <span class="token builtin">rune</span> <span class="token operator">=</span> <span class="token number">940</span>
	<span class="token keyword">var</span> omega <span class="token builtin">rune</span> <span class="token operator">=</span> <span class="token number">969</span>
	<span class="token keyword">var</span> bang <span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token number">33</span>

	<span class="token comment">// 打印出的是 code point</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v %v %v %v\n&quot;</span><span class="token punctuation">,</span> pi<span class="token punctuation">,</span> alpha<span class="token punctuation">,</span> omega<span class="token punctuation">,</span> bang<span class="token punctuation">)</span>
	<span class="token comment">// 打印出的是字符</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c %c %c %c\n&quot;</span><span class="token punctuation">,</span> pi<span class="token punctuation">,</span> alpha<span class="token punctuation">,</span> omega<span class="token punctuation">,</span> bang<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run main<span class="token punctuation">.</span>go
960 940 969 33
π ά ω <span class="token operator">!</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="字符" tabindex="-1"><a class="header-anchor" href="#字符" aria-hidden="true">#</a> 字符</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 字符字面值使用 `&#39;&#39;` 包裏</span>
	<span class="token comment">// 不指定类型的话会被推断为 rune</span>
	grade <span class="token operator">:=</span> <span class="token char">&#39;A&#39;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;grade: %T %v %c&quot;</span><span class="token punctuation">,</span> grade<span class="token punctuation">,</span> grade<span class="token punctuation">,</span> grade<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run rune<span class="token punctuation">.</span>go
grade: int32 65 A
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="string" tabindex="-1"><a class="header-anchor" href="#string" aria-hidden="true">#</a> string</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;unicode/utf8&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	operator <span class="token operator">:=</span> <span class="token string">&quot;巫恋&quot;</span>

	<span class="token comment">// len 输出字节数而不是字符数</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>operator<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;bytes&quot;</span><span class="token punctuation">)</span>
	<span class="token comment">// utf8 的包带有输出字符数的方法</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">RuneCountInString</span><span class="token punctuation">(</span>operator<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;runes&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// DecodeRundeInString 返回字符串中的第一个字符和它的字节数</span>
	runeItem<span class="token punctuation">,</span> size <span class="token operator">:=</span> utf8<span class="token punctuation">.</span><span class="token function">DecodeRuneInString</span><span class="token punctuation">(</span>operator<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;first rune: %c, %v bytes\n&quot;</span><span class="token punctuation">,</span> runeItem<span class="token punctuation">,</span> size<span class="token punctuation">)</span>

	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;===&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// range 返回的 index 是以根据字节数计算的</span>
	<span class="token keyword">for</span> index<span class="token punctuation">,</span> item <span class="token operator">:=</span> <span class="token keyword">range</span> operator <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v, %c\n&quot;</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;===&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run string<span class="token punctuation">.</span>go
6 bytes
2 runes
first rune: 巫<span class="token punctuation">,</span> 3 bytes
===
0 24043
0<span class="token punctuation">,</span> 巫
===
3 24651
3<span class="token punctuation">,</span> 恋
===
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="类形转换" tabindex="-1"><a class="header-anchor" href="#类形转换" aria-hidden="true">#</a> 类形转换</h3><ul><li>无符号与有符号的整数型之间也需要转换。</li><li>不同大小的整数型之间也需要转换。</li><li>将整数型转化为字符串型时，如果它的值不能转化为 code point，虽然不会报错，但会輸出乱码。</li><li>整数型与布尔型，字符串型与布尔型之间无法互相转换</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;math&quot;</span>
	<span class="token string">&quot;strconv&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	description <span class="token operator">:=</span> <span class="token string">&quot;Shamare is&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;138cm&quot;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span>
	<span class="token comment">// 直接连接字符串与数值会报错</span>
	<span class="token comment">// description02 := &quot;Shamare is &quot; + 138 + &quot;cm&quot;</span>

	<span class="token comment">// 整数型与浮点型也不能混合使用</span>
	pi <span class="token operator">:=</span> math<span class="token punctuation">.</span>Pi
	times <span class="token operator">:=</span> <span class="token number">2</span>
	<span class="token comment">// 报错</span>
	<span class="token comment">// fmt.Println(pi * times)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>pi<span class="token punctuation">,</span> times<span class="token punctuation">)</span>

	<span class="token comment">// 类形转换使用目标类型去包裏</span>
	<span class="token comment">// 从浮点型转换为整数型时，小数点之后的部分会被截断而不是舍入</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>pi<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// rune, bype 可以转换成 string，输出结果为该值对应的字符</span>
	<span class="token keyword">var</span> piItme <span class="token builtin">rune</span> <span class="token operator">=</span> <span class="token number">960</span>
	<span class="token keyword">var</span> bang <span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token number">33</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>piItme<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>bang<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// 如果需要直接输出字符串型的数字，需要使用 strconv 包的 Itoa 函数</span>
	<span class="token comment">// Itoa: Integer to ASCII</span>
	description02 <span class="token operator">:=</span> <span class="token string">&quot;Shamare is &quot;</span> <span class="token operator">+</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token number">138</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;cm&quot;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>description02<span class="token punctuation">)</span>

	<span class="token comment">// strconv 包中亦有 Atoi 函数，但需要错误处理</span>
	text<span class="token punctuation">,</span> exception <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> exception <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>exception<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run typeChange<span class="token punctuation">.</span>go 
Shamare is138cm
3<span class="token punctuation">.</span>141592653589793 2
3
π <span class="token operator">!</span>
Shamare is 138cm
10
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="声明新类型" tabindex="-1"><a class="header-anchor" href="#声明新类型" aria-hidden="true">#</a> 声明新类型</h3><ul><li>可以使用 <code>type</code> 关键字来声明类型。</li><li>自定义类型可以提高代码可读性。</li></ul><h2 id="函数" tabindex="-1"><a class="header-anchor" href="#函数" aria-hidden="true">#</a> 函数</h2><ul><li>大写字母开头的函数、变量或其他标识符被被导出。</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">)</span>
	<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// `...` 表示函数的参数可变；`interface{}` 为空接口，所有类型均可实现</span>
<span class="token keyword">func</span> <span class="token function">sleep</span><span class="token punctuation">(</span>nameList <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	length <span class="token operator">:=</span> <span class="token function">len</span><span class="token punctuation">(</span>nameList<span class="token punctuation">)</span>
	<span class="token keyword">var</span> name <span class="token builtin">string</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		name <span class="token operator">+=</span> nameList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> i <span class="token operator">!=</span> length<span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">{</span>
			name <span class="token operator">+=</span> <span class="token string">&quot;, &quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	beVerb <span class="token operator">:=</span> <span class="token string">&quot;is&quot;</span>

	<span class="token keyword">if</span> length <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token punctuation">{</span>
		beVerb <span class="token operator">=</span> <span class="token string">&quot;are&quot;</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v %v sleeping in my arms.\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> beVerb<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run parameterChangeableFunction<span class="token punctuation">.</span>go 
Shamare is sleeping in my arms<span class="token punctuation">.</span>
Shamare<span class="token punctuation">,</span> Suzuran are sleeping in my arms<span class="token punctuation">.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="方法" tabindex="-1"><a class="header-anchor" href="#方法" aria-hidden="true">#</a> 方法</h3><ul><li>函数是独立存在的。</li><li>方法是指与类型相关联的函数。</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 定义类型</span>
<span class="token keyword">type</span> operator <span class="token builtin">string</span>

<span class="token comment">// 将方法关联到类型</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>loli operator<span class="token punctuation">)</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v is sleeping in my arms.\n&quot;</span><span class="token punctuation">,</span> loli<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> loli operator <span class="token operator">=</span> <span class="token string">&quot;Shamare&quot;</span>
	<span class="token comment">// 使用关联后的方法</span>
	loli<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run method<span class="token punctuation">.</span>go 
Shamare is sleeping in my arms<span class="token punctuation">.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="声明函数类型" tabindex="-1"><a class="header-anchor" href="#声明函数类型" aria-hidden="true">#</a> 声明函数类型</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> sleep sleep <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v is sleeping in my arms.\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 声明函数类型</span>
<span class="token keyword">type</span> sleep <span class="token keyword">func</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run functionType<span class="token punctuation">.</span>go 
Shamare is sleeping in my arms<span class="token punctuation">.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="闭包" tabindex="-1"><a class="header-anchor" href="#闭包" aria-hidden="true">#</a> 闭包</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	count <span class="token operator">:=</span> <span class="token number">0</span>

	visitCount <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> count
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">visitCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>

	count<span class="token operator">++</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">visitCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run closure<span class="token punctuation">.</span>go 
0
1
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="数组" tabindex="-1"><a class="header-anchor" href="#数组" aria-hidden="true">#</a> 数组</h2><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// 一个长度为 8 的字符串类型数组</span>
<span class="token keyword">var</span> planets <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token builtin">string</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="使用复合字面值初始化数组" tabindex="-1"><a class="header-anchor" href="#使用复合字面值初始化数组" aria-hidden="true">#</a> 使用复合字面值初始化数组</h3><ul><li>复合字面值是一种给复合类型初始化的紧凑语法。</li><li>仅用一步即可完成数组声明和数组初始化。</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// 使用 `...` 作为长度可以让编译器自动算出长度</span>
operators <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;April&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="遍历数组" tabindex="-1"><a class="header-anchor" href="#遍历数组" aria-hidden="true">#</a> 遍历数组</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	operators <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;April&quot;</span><span class="token punctuation">}</span>

	<span class="token comment">// 也可以使用传统的三段式</span>
	<span class="token keyword">for</span> index<span class="token punctuation">,</span> operator <span class="token operator">:=</span> <span class="token keyword">range</span> operators <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> operator<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run iterate<span class="token punctuation">.</span>go
0 Shamare
1 Suzuran
2 April
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="数组的复制" tabindex="-1"><a class="header-anchor" href="#数组的复制" aria-hidden="true">#</a> 数组的复制</h3><p>数组的赋值与传值会生成一个新的副本，而不是传递一个引用。</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	operators <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;April&quot;</span><span class="token punctuation">}</span>
	operators02 <span class="token operator">:=</span> operators

	operators<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Rope&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>operators<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>operators02<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run <span class="token function">copy</span><span class="token punctuation">.</span>go 
<span class="token namespace">[Shamare Suzuran Rope]</span>
<span class="token namespace">[Shamare Suzuran April]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="切片" tabindex="-1"><a class="header-anchor" href="#切片" aria-hidden="true">#</a> 切片</h2><ul><li>切片是指向数组的窗口</li><li>可以切分字符串 <ul><li>切分字节数而不是符文</li></ul></li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>operators <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token comment">// 这就是一个切片，它表示了数组中前 2 个元素</span>
<span class="token comment">// 索引不可以为负数</span>
operators<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="忽略索引" tabindex="-1"><a class="header-anchor" href="#忽略索引" aria-hidden="true">#</a> 忽略索引</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>operators <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">string</span>

<span class="token comment">// 忽略起始表示从数组的起始位置切分</span>
ignoreStart <span class="token operator">:=</span> operators<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token comment">// 忽略结速表示以数组的长度为结束位置</span>
ignoreEnd <span class="token operator">:=</span> operators<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
<span class="token comment">// 同时省略二者表示包含数组的所有元素</span>
ignoreDouble <span class="token operator">:=</span> operator<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="切片的复合字面值" tabindex="-1"><a class="header-anchor" href="#切片的复合字面值" aria-hidden="true">#</a> 切片的复合字面值</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	operators <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">}</span>
	operatorsSlice <span class="token operator">:=</span> operators<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

	operatorsSlice2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>operatorsSlice<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>operatorsSlice2<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %T\n&quot;</span><span class="token punctuation">,</span> operators<span class="token punctuation">,</span> operatorsSlice2<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run literal<span class="token punctuation">.</span>go 
<span class="token namespace">[Shamare Suzuran]</span>
<span class="token namespace">[Shamare Suzuran]</span>
<span class="token punctuation">[</span>2<span class="token punctuation">]</span>string <span class="token punctuation">[</span><span class="token punctuation">]</span>string
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="append-函数" tabindex="-1"><a class="header-anchor" href="#append-函数" aria-hidden="true">#</a> append 函数</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	operators <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">}</span>
	operators <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>operators<span class="token punctuation">,</span> <span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>operators<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run append<span class="token punctuation">.</span>go
<span class="token namespace">[Suzuran Shamare]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="容量" tabindex="-1"><a class="header-anchor" href="#容量" aria-hidden="true">#</a> 容量</h3><p>容量就是切片所对应的底层数组的长度</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	operators <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">}</span>
	<span class="token function">dump</span><span class="token punctuation">(</span><span class="token string">&quot;operators&quot;</span><span class="token punctuation">,</span> operators<span class="token punctuation">)</span>
	<span class="token function">dump</span><span class="token punctuation">(</span><span class="token string">&quot;operators[:1]&quot;</span><span class="token punctuation">,</span> operators<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">dump</span><span class="token punctuation">(</span>label <span class="token builtin">string</span><span class="token punctuation">,</span> slice <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v: length %v, capacity %v\n&quot;</span><span class="token punctuation">,</span> label<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>slice<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>slice<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>slice<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run capacity<span class="token punctuation">.</span>go 
operators: length 2<span class="token punctuation">,</span> capacity 2
<span class="token namespace">[Shamare Suzuran]</span>
operators<span class="token punctuation">[</span>:1<span class="token punctuation">]</span>: length 1<span class="token punctuation">,</span> capacity 2
<span class="token namespace">[Shamare]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="限制新建切片容量" tabindex="-1"><a class="header-anchor" href="#限制新建切片容量" aria-hidden="true">#</a> 限制新建切片容量</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>operators <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">}</span>
<span class="token comment">// 每次增加容量时只会增加 1 个容量</span>
slice <span class="token operator">:=</span> operators<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="使用-make-函数预置切片" tabindex="-1"><a class="header-anchor" href="#使用-make-函数预置切片" aria-hidden="true">#</a> 使用 make 函数预置切片</h3><p>可以防止多余的内存消耗</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// 长度为 0，容量为 10</span>
operators <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="map" tabindex="-1"><a class="header-anchor" href="#map" aria-hidden="true">#</a> map</h2><ul><li>map 在传递时不会创建副本</li><li>除非使用复合字面值初始化 map，否則必须使用 make 函数分配空间。</li></ul><h3 id="声明-map" tabindex="-1"><a class="header-anchor" href="#声明-map" aria-hidden="true">#</a> 声明 map</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// map[key]value</span>
<span class="token comment">// 可以使用复合字面值，即直接加大括号赋值</span>
<span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="向-map-赋值" tabindex="-1"><a class="header-anchor" href="#向-map-赋值" aria-hidden="true">#</a> 向 map 赋值</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>height <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">:</span> <span class="token number">138</span><span class="token punctuation">}</span>
height<span class="token punctuation">[</span><span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">137</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="判断值是否存在" tabindex="-1"><a class="header-anchor" href="#判断值是否存在" aria-hidden="true">#</a> 判断值是否存在</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">if</span> operator<span class="token punctuation">,</span> exist <span class="token operator">:=</span> height<span class="token punctuation">[</span><span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> exist <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;exist&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;not exist&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="删除-map-中的项目" tabindex="-1"><a class="header-anchor" href="#删除-map-中的项目" aria-hidden="true">#</a> 删除 map 中的项目</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// delete(map, key)</span>
<span class="token function">delete</span><span class="token punctuation">(</span>height<span class="token punctuation">,</span> <span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="计数器案例" tabindex="-1"><a class="header-anchor" href="#计数器案例" aria-hidden="true">#</a> 计数器案例</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	supporter <span class="token operator">:=</span> <span class="token string">&quot;Supporter&quot;</span>
	medic <span class="token operator">:=</span> <span class="token string">&quot;Medic&quot;</span>

	operators <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
		<span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">:</span>    supporter<span class="token punctuation">,</span>
		<span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">:</span>    supporter<span class="token punctuation">,</span>
		<span class="token string">&quot;Honeyberry&quot;</span><span class="token punctuation">:</span> medic<span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 创建一个计数器</span>
	classCount <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> class <span class="token operator">:=</span> <span class="token keyword">range</span> operators <span class="token punctuation">{</span>
		<span class="token comment">// 遇到相同的 class 就会叠加</span>
		classCount<span class="token punctuation">[</span>class<span class="token punctuation">]</span><span class="token operator">++</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 遍历计数器</span>
	<span class="token keyword">for</span> class<span class="token punctuation">,</span> number <span class="token operator">:=</span> <span class="token keyword">range</span> classCount <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v: %v\n&quot;</span><span class="token punctuation">,</span> class<span class="token punctuation">,</span> number<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run count<span class="token punctuation">.</span>go 
Medic: 1
Supporter: 2
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="结构类型" tabindex="-1"><a class="header-anchor" href="#结构类型" aria-hidden="true">#</a> 结构类型</h2><h3 id="声明结构体" tabindex="-1"><a class="header-anchor" href="#声明结构体" aria-hidden="true">#</a> 声明结构体</h3><p>结构体的复制会创建副本</p><h4 id="直接声明结构体" tabindex="-1"><a class="header-anchor" href="#直接声明结构体" aria-hidden="true">#</a> 直接声明结构体</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">var</span> shamare <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
    height <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// 可以直接赋值</span>
shamare<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Shamare&quot;</span>

<span class="token comment">// 使用复合字面值声明</span>
<span class="token keyword">var</span> suzuran <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;Suzuran&quot;</span><span class="token punctuation">,</span>
    height<span class="token punctuation">:</span> <span class="token number">137</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="以类型的方式声明" tabindex="-1"><a class="header-anchor" href="#以类型的方式声明" aria-hidden="true">#</a> 以类型的方式声明</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> operator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
    height <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> shamare operator
<span class="token keyword">var</span> suzuran operator
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="将结构体编码为-json" tabindex="-1"><a class="header-anchor" href="#将结构体编码为-json" aria-hidden="true">#</a> 将结构体编码为 JSON</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;encoding/json&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 要转换成 JSON 时属性名必须大写，否则属性不能导出</span>
	<span class="token keyword">type</span> operator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		<span class="token comment">// 自定义 JSON 输出时的格式</span>
		Name   <span class="token builtin">string</span> <span class="token string">`json:&quot;name&quot;`</span>
		Height <span class="token builtin">int</span>    <span class="token string">`json:&quot;height&quot;`</span>
	<span class="token punctuation">}</span>

	shamare <span class="token operator">:=</span> operator<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span> Height<span class="token punctuation">:</span> <span class="token number">138</span><span class="token punctuation">}</span>

	bytes<span class="token punctuation">,</span> exception <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>shamare<span class="token punctuation">)</span>
	<span class="token function">handleError</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>shamare<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">handleError</span><span class="token punctuation">(</span>exception <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> exception <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span>
	<span class="token comment">// 退出程序</span>
	os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run toJSON<span class="token punctuation">.</span>go 
<span class="token punctuation">{</span>Shamare 138<span class="token punctuation">}</span>
<span class="token punctuation">[</span>123 34 78 97 109 101 34 58 34 83 104 97 109 97 114 101 34 44 34 72 101 105 103 
104 116 34 58 49 51 56 125<span class="token punctuation">]</span>
<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;height&quot;</span>:138<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="关联方法至结构体" tabindex="-1"><a class="header-anchor" href="#关联方法至结构体" aria-hidden="true">#</a> 关联方法至结构体</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	shamare <span class="token operator">:=</span> operator<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">138</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>shamare<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> operator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name   <span class="token builtin">string</span>
	height <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>unit operator<span class="token punctuation">)</span> <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> unit<span class="token punctuation">.</span>height
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run structWithMethod<span class="token punctuation">.</span>go
138
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="结构体的嵌入-embedded" tabindex="-1"><a class="header-anchor" href="#结构体的嵌入-embedded" aria-hidden="true">#</a> 结构体的嵌入（embedded）</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	shamare <span class="token operator">:=</span> operator<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">138</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>shamare<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>shamare<span class="token punctuation">.</span>height<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> operator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name
	height
<span class="token punctuation">}</span>

<span class="token keyword">type</span> name <span class="token builtin">string</span>
<span class="token keyword">type</span> height <span class="token builtin">int</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>_height height<span class="token punctuation">)</span> <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> height <span class="token punctuation">{</span>
	<span class="token keyword">return</span> _height
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run embedded<span class="token punctuation">.</span>go 
138
138
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="接口" tabindex="-1"><a class="header-anchor" href="#接口" aria-hidden="true">#</a> 接口</h2><ul><li>go 语言中不需要显示声明接口。</li><li>命名规范为结尾加 <code>er</code>。</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	shamare <span class="token operator">:=</span> operator<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&quot;Shamare&quot;</span><span class="token punctuation">}</span>
	<span class="token comment">// 因为构造体中的字段实现了 operatorer 接口，所以构造体的实例也就实现了接口</span>
	<span class="token function">printName</span><span class="token punctuation">(</span>shamare<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> operatorer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> name
<span class="token punctuation">}</span>

<span class="token comment">// 需要传入实现了接口的参数</span>
<span class="token keyword">func</span> <span class="token function">printName</span><span class="token punctuation">(</span>unit operatorer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unit<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> operator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token comment">// 使用嵌入的方式定义构造体</span>
	name
<span class="token punctuation">}</span>

<span class="token keyword">type</span> name <span class="token builtin">string</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>_name name<span class="token punctuation">)</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> name <span class="token punctuation">{</span>
	<span class="token keyword">return</span> _name
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run main<span class="token punctuation">.</span>go 
Shamare
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="指针-pointer" tabindex="-1"><a class="header-anchor" href="#指针-pointer" aria-hidden="true">#</a> 指针（pointer）</h2><ul><li><code>&amp;</code> 是地址操作符，通过 <code>&amp;</code> 可以获取变量的内存地址。 <ul><li>无法获得字符串、数值、布尔值的字面值的地址。</li></ul></li><li><code>*</code> 可以解引用，提供内存地址指向的值。 <ul><li>放在类型前表示声明指针类型。</li></ul></li><li>go 中不允许指针运算。</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	operator <span class="token operator">:=</span> <span class="token string">&quot;Shamare&quot;</span>
	name <span class="token operator">:=</span> <span class="token operator">&amp;</span>operator
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>name<span class="token punctuation">)</span>

	<span class="token comment">// 解引用也可以直接更改所引用的地址中的值</span>
	<span class="token operator">*</span>name <span class="token operator">=</span> <span class="token string">&quot;Suzuran&quot;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>operator<span class="token punctuation">)</span>

	<span class="token keyword">type</span> class <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		typeName <span class="token builtin">string</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// `&amp;` 可以直接用在复合字面量之前</span>
	_class <span class="token operator">:=</span> <span class="token operator">&amp;</span>class<span class="token punctuation">{</span>typeName<span class="token punctuation">:</span> <span class="token string">&quot;Supporter&quot;</span><span class="token punctuation">}</span>
	<span class="token comment">// 访问字段和数组时，解引用不是必须的</span>
	_class<span class="token punctuation">.</span>typeName <span class="token operator">=</span> <span class="token string">&quot;medic&quot;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%+v\n&quot;</span><span class="token punctuation">,</span> _class<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run main<span class="token punctuation">.</span>go 
0xc00006a250
Shamare
Suzuran
&amp;<span class="token punctuation">{</span>typeName:medic<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="隐式指针" tabindex="-1"><a class="header-anchor" href="#隐式指针" aria-hidden="true">#</a> 隐式指针</h3><ul><li>map 在被赋值或传递时不创建副本。</li><li>slice 在指向数组元素时也使用了指针。</li></ul><h2 id="错误处理" tabindex="-1"><a class="header-anchor" href="#错误处理" aria-hidden="true">#</a> 错误处理</h2><ul><li>函数在返回错误时，最后的一个返回值应用来表示错误。</li><li>调用函数后，应立即检查是否发生错误。 <ul><li>如果没有错误发生，应返回值为 <code>nil</code> 的错误。</li></ul></li><li>实现 <code>error</code> 接口中的 <code>Error()</code> 方法就可以自定义错误类型。 <ul><li>自定义错误的名字应该以 <code>Error</code> 结尾。</li></ul></li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;io&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	exception <span class="token operator">:=</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;shamare&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> exception <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span>
		os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> safeWriter <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	write     io<span class="token punctuation">.</span>Writer
	exception <span class="token builtin">error</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>_safeWriter safeWriter<span class="token punctuation">)</span> <span class="token function">writeln</span><span class="token punctuation">(</span>text <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> _safeWriter<span class="token punctuation">.</span>exception <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 每次错误发生时更新结构体中的错误</span>
	<span class="token boolean">_</span><span class="token punctuation">,</span> _safeWriter<span class="token punctuation">.</span>exception <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Fprintln</span><span class="token punctuation">(</span>_safeWriter<span class="token punctuation">.</span>write<span class="token punctuation">,</span> text<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">writeFile</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	file<span class="token punctuation">,</span> exception <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
	<span class="token comment">// 使用 defer 关键字，可以确保 deferred 的动作在函数返回前执行。</span>
	<span class="token comment">// 即不用每个返回文前都添加相同的操作。</span>
	<span class="token keyword">defer</span> file<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> exception <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> exception
	<span class="token punctuation">}</span>

	_safeWriter <span class="token operator">:=</span> safeWriter<span class="token punctuation">{</span>write<span class="token punctuation">:</span> file<span class="token punctuation">}</span>
	_safeWriter<span class="token punctuation">.</span><span class="token function">writeln</span><span class="token punctuation">(</span><span class="token string">&quot;Shamare is a supporter.&quot;</span><span class="token punctuation">)</span>
	_safeWriter<span class="token punctuation">.</span><span class="token function">writeln</span><span class="token punctuation">(</span><span class="token string">&quot;Suzuran is a supporter too.&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> _safeWriter<span class="token punctuation">.</span>exception
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="其他语言中的异常与-go-的错误值的比较" tabindex="-1"><a class="header-anchor" href="#其他语言中的异常与-go-的错误值的比较" aria-hidden="true">#</a> 其他语言中的异常与 go 的错误值的比较</h3><ul><li>其他语言中的异常如果没有人捕获，会一直冒泡直到栈的顶部。所以错误处理本身是可选的。</li><li>go 语言中除非开发者有意忽略，否则不能不处理错误。</li></ul><h3 id="创建-panic" tabindex="-1"><a class="header-anchor" href="#创建-panic" aria-hidden="true">#</a> 创建 panic</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// 参数可以是任意类型</span>
<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;some text&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="使用-recover-保证发生-panic-程序也能正常运行结束" tabindex="-1"><a class="header-anchor" href="#使用-recover-保证发生-panic-程序也能正常运行结束" aria-hidden="true">#</a> 使用 recover 保证发生 panic 程序也能正常运行结束</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 被 defer 的内容会在函数返回前执行</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		_panic <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> _panic <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>_panic<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;panic happened!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run recover<span class="token punctuation">.</span>go 
panic happened!
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="并发-concurrent-calculation" tabindex="-1"><a class="header-anchor" href="#并发-concurrent-calculation" aria-hidden="true">#</a> 并发（Concurrent Calculation）</h2><h3 id="goroutine" tabindex="-1"><a class="header-anchor" href="#goroutine" aria-hidden="true">#</a> goroutine</h3><ul><li>go 语言中，独立的任务叫作 goroutine。</li><li>在任意调用前使用 <code>go</code> 关键字即可启用 goroutine。</li></ul><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">go</span> <span class="token function">shamareAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">suzuranAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">shamareAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Shamare attacked.&quot;</span><span class="token punctuation">)</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">suzuranAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Suzuran attacked.&quot;</span><span class="token punctuation">)</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run main<span class="token punctuation">.</span>go 
1 Suzuran attacked<span class="token punctuation">.</span>
1 Shamare attacked<span class="token punctuation">.</span>
2 Shamare attacked<span class="token punctuation">.</span>
2 Suzuran attacked<span class="token punctuation">.</span>
3 Suzuran attacked<span class="token punctuation">.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="通道" tabindex="-1"><a class="header-anchor" href="#通道" aria-hidden="true">#</a> 通道</h3><ul><li>使用通道可以在多个 goroutine 之间安全地传值。</li><li>往通道发送消息和从通道中接收消息都会阻塞代码的运行。</li></ul><h4 id="创建通道" tabindex="-1"><a class="header-anchor" href="#创建通道" aria-hidden="true">#</a> 创建通道</h4><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>_channel <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// 向通道发送值</span>
_channel <span class="token operator">&lt;-</span> <span class="token number">99</span>
<span class="token comment">// 从通道接收值</span>
temp <span class="token operator">:=</span> <span class="token operator">&lt;-</span> _channel
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	channelShamare <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
	channelSuzuran <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> count <span class="token builtin">int</span>

	<span class="token keyword">go</span> <span class="token function">shamareAttack</span><span class="token punctuation">(</span>channelShamare<span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">suzuranAttack</span><span class="token punctuation">(</span>channelSuzuran<span class="token punctuation">)</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token comment">// 使用 select 执行未被阻塞的通道</span>
		<span class="token keyword">select</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> text<span class="token punctuation">,</span> opening <span class="token operator">:=</span> <span class="token operator">&lt;-</span>channelShamare<span class="token punctuation">:</span>
			<span class="token keyword">if</span> <span class="token operator">!</span>opening <span class="token punctuation">{</span>
				<span class="token keyword">return</span>
			<span class="token punctuation">}</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
			count<span class="token operator">++</span>

		<span class="token keyword">case</span> text<span class="token punctuation">,</span> opening <span class="token operator">:=</span> <span class="token operator">&lt;-</span>channelSuzuran<span class="token punctuation">:</span>
			<span class="token keyword">if</span> <span class="token operator">!</span>opening <span class="token punctuation">{</span>
				<span class="token keyword">return</span>
			<span class="token punctuation">}</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
			count<span class="token operator">++</span>
		<span class="token punctuation">}</span>

		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Attaced %v times.\n&quot;</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">shamareAttack</span><span class="token punctuation">(</span>channel <span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	text <span class="token operator">:=</span> <span class="token string">&quot;Shamare attacked.&quot;</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		channel <span class="token operator">&lt;-</span> text
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 使用 close 关闭通道以避免阻塞死锁</span>
	<span class="token function">close</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">suzuranAttack</span><span class="token punctuation">(</span>channel <span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	text <span class="token operator">:=</span> <span class="token string">&quot;Suzuran attacked.&quot;</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		channel <span class="token operator">&lt;-</span> text
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">500</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token function">close</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ go run channel<span class="token punctuation">.</span>go 
Shamare attacked<span class="token punctuation">.</span>
Attaced 1 times<span class="token punctuation">.</span>
Suzuran attacked<span class="token punctuation">.</span>
Attaced 2 times<span class="token punctuation">.</span>
Suzuran attacked<span class="token punctuation">.</span>
Attaced 3 times<span class="token punctuation">.</span>
Shamare attacked<span class="token punctuation">.</span>
Attaced 4 times<span class="token punctuation">.</span>
Suzuran attacked<span class="token punctuation">.</span>
Attaced 5 times<span class="token punctuation">.</span>
Suzuran attacked<span class="token punctuation">.</span>
Attaced 6 times<span class="token punctuation">.</span>
Shamare attacked<span class="token punctuation">.</span>
Attaced 7 times<span class="token punctuation">.</span>
Suzuran attacked<span class="token punctuation">.</span>
Attaced 8 times<span class="token punctuation">.</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="互斥锁-mutex" tabindex="-1"><a class="header-anchor" href="#互斥锁-mutex" aria-hidden="true">#</a> 互斥锁（mutex）</h3><p>阻止复数 goroutine 在同一时间操作相同的东西。</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;sync&quot;</span>

<span class="token comment">// 声明互斥锁</span>
<span class="token keyword">var</span> mutex sync<span class="token punctuation">.</span>Mutex

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	mutex<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> mutex<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/SetsuikiHyoryu/blog-source/edit/main/programming/programming-languages/go/golang-study.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: tayutai@outlook.jp">SETSUIKI HYORYU</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/programming/programming-languages/" class="router-link-active" aria-label="上一级"><!--[--><!--]--> 上一级 <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.abe8b9ac.js" defer></script>
  </body>
</html>
