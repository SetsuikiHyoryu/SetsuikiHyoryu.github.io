import{_ as s,c as n,o as a,a as l}from"./app.2bacd2cf.js";const C=JSON.parse('{"title":"\u5728 Docker \u4E0A\u4F7F\u7528 MySQL","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u53C2\u8003\u89C6\u9891","slug":"\u53C2\u8003\u89C6\u9891","link":"#\u53C2\u8003\u89C6\u9891","children":[]},{"level":2,"title":"1. \u5728\u4E3B\u673A\u5EFA\u7ACB\u4FDD\u5B58\u6570\u636E\u5E93\u7684\u76EE\u5F55","slug":"_1-\u5728\u4E3B\u673A\u5EFA\u7ACB\u4FDD\u5B58\u6570\u636E\u5E93\u7684\u76EE\u5F55","link":"#_1-\u5728\u4E3B\u673A\u5EFA\u7ACB\u4FDD\u5B58\u6570\u636E\u5E93\u7684\u76EE\u5F55","children":[]},{"level":2,"title":"2. \u521B\u5EFA docker-compose.yml \u6587\u4EF6","slug":"_2-\u521B\u5EFA-docker-compose-yml-\u6587\u4EF6","link":"#_2-\u521B\u5EFA-docker-compose-yml-\u6587\u4EF6","children":[]},{"level":2,"title":"3. \u5728 docker \u4E2D\u542F\u52A8\u670D\u52A1","slug":"_3-\u5728-docker-\u4E2D\u542F\u52A8\u670D\u52A1","link":"#_3-\u5728-docker-\u4E2D\u542F\u52A8\u670D\u52A1","children":[]},{"level":2,"title":"4. \u5728\u5BB9\u5668\u4E2D\u8BBF\u95EE Mysql","slug":"_4-\u5728\u5BB9\u5668\u4E2D\u8BBF\u95EE-mysql","link":"#_4-\u5728\u5BB9\u5668\u4E2D\u8BBF\u95EE-mysql","children":[]},{"level":2,"title":"5. \u4F7F\u7528 golang \u8FDE\u63A5\u6570\u636E\u5E93","slug":"_5-\u4F7F\u7528-golang-\u8FDE\u63A5\u6570\u636E\u5E93","link":"#_5-\u4F7F\u7528-golang-\u8FDE\u63A5\u6570\u636E\u5E93","children":[{"level":3,"title":"5.1. \u5B89\u88C5 mysql \u9A71\u52A8","slug":"_5-1-\u5B89\u88C5-mysql-\u9A71\u52A8","link":"#_5-1-\u5B89\u88C5-mysql-\u9A71\u52A8","children":[]},{"level":3,"title":"5.2. \u7F16\u5199\u7A0B\u5E8F","slug":"_5-2-\u7F16\u5199\u7A0B\u5E8F","link":"#_5-2-\u7F16\u5199\u7A0B\u5E8F","children":[]}]}],"relativePath":"zh/programming/database/mysql/use-mysql-on-docker.md","lastUpdated":1670114049000}'),p={name:"zh/programming/database/mysql/use-mysql-on-docker.md"},e=l(`<h1 id="\u5728-docker-\u4E0A\u4F7F\u7528-mysql" tabindex="-1">\u5728 Docker \u4E0A\u4F7F\u7528 MySQL <a class="header-anchor" href="#\u5728-docker-\u4E0A\u4F7F\u7528-mysql" aria-hidden="true">#</a></h1><h2 id="\u53C2\u8003\u89C6\u9891" tabindex="-1">\u53C2\u8003\u89C6\u9891 <a class="header-anchor" href="#\u53C2\u8003\u89C6\u9891" aria-hidden="true">#</a></h2><p><a href="https://www.youtube.com/watch?v=0qNTbkFfR4U" target="_blank" rel="noreferrer">Docker \u3067 MySQL \u306E\u6700\u5C0F\u69CB\u6210\u3092\u69CB\u7BC9\u3057\u307E\u3059\u3002\u30C7\u30FC\u30BF\u6C38\u7D9A\u5316\u8A2D\u5B9A\u3082\u3042\u308A</a></p><h2 id="_1-\u5728\u4E3B\u673A\u5EFA\u7ACB\u4FDD\u5B58\u6570\u636E\u5E93\u7684\u76EE\u5F55" tabindex="-1">1. \u5728\u4E3B\u673A\u5EFA\u7ACB\u4FDD\u5B58\u6570\u636E\u5E93\u7684\u76EE\u5F55 <a class="header-anchor" href="#_1-\u5728\u4E3B\u673A\u5EFA\u7ACB\u4FDD\u5B58\u6570\u636E\u5E93\u7684\u76EE\u5F55" aria-hidden="true">#</a></h2><table><thead><tr><th style="text-align:left;">\u76EE\u5F55</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;">mysql</td><td style="text-align:left;">\u6839\u76EE\u5F55</td></tr><tr><td style="text-align:left;">mysql/data</td><td style="text-align:left;">\u6570\u636E\u5E93\u4FDD\u5B58\u6587\u4EF6\u5939</td></tr></tbody></table><h2 id="_2-\u521B\u5EFA-docker-compose-yml-\u6587\u4EF6" tabindex="-1">2. \u521B\u5EFA docker-compose.yml \u6587\u4EF6 <a class="header-anchor" href="#_2-\u521B\u5EFA-docker-compose-yml-\u6587\u4EF6" aria-hidden="true">#</a></h2><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># mysql/docker-compose.yml</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.9</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mysql</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:8.0.31</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">container_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql_db</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">3306:3306</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">33060:33060</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;"># Need to set password for root user.</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MYSQL_ROOT_PASSWORD=password</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;"># Time zone.</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TZ=Asia/Tokyo</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;"># \u4F7F\u7528\u5377\u6620\u5C04\u672C\u5730\u76EE\u5F55\u4EE5\u4FDD\u5B58\u6570\u636E</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./data:/var/lib/mysql</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_3-\u5728-docker-\u4E2D\u542F\u52A8\u670D\u52A1" tabindex="-1">3. \u5728 docker \u4E2D\u542F\u52A8\u670D\u52A1 <a class="header-anchor" href="#_3-\u5728-docker-\u4E2D\u542F\u52A8\u670D\u52A1" aria-hidden="true">#</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># \u7F16\u8BD1\u670D\u52A1</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose build</span></span>
<span class="line"><span style="color:#676E95;"># \u542F\u52A8\u5BB9\u5668 --detach, -d: Run containers in the background.</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose up --detach</span></span>
<span class="line"><span style="color:#676E95;"># \u67E5\u8BE2\u5BB9\u5668\u72B6\u6001</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose ps</span></span>
<span class="line"><span style="color:#676E95;"># \u67E5\u770B\u5BB9\u5668\u8F93\u51FA\u65E5\u5FD7 --follow, -f: Follow log outpu.</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose logs --follow mongo</span></span>
<span class="line"><span style="color:#676E95;"># \u505C\u6B62\u5BB9\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose stop</span></span>
<span class="line"><span style="color:#676E95;"># \u505C\u6B62\u5BB9\u5668\u5E76\u5220\u9664\u5BB9\u5668\u53CA\u7F51\u7EDC</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose down</span></span>
<span class="line"><span style="color:#676E95;"># \u505C\u6B62\u5BB9\u5668\u5E76\u5220\u9664\u5BB9\u5668\u3001\u7F51\u7EDC\u3001\u955C\u50CF</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose down --rmi all</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_4-\u5728\u5BB9\u5668\u4E2D\u8BBF\u95EE-mysql" tabindex="-1">4. \u5728\u5BB9\u5668\u4E2D\u8BBF\u95EE Mysql <a class="header-anchor" href="#_4-\u5728\u5BB9\u5668\u4E2D\u8BBF\u95EE-mysql" aria-hidden="true">#</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># Mysql is server name in \`docker-compose.yml\`.</span></span>
<span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it mysql bash</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>then</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql -u root -ppassword</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_5-\u4F7F\u7528-golang-\u8FDE\u63A5\u6570\u636E\u5E93" tabindex="-1">5. \u4F7F\u7528 golang \u8FDE\u63A5\u6570\u636E\u5E93 <a class="header-anchor" href="#_5-\u4F7F\u7528-golang-\u8FDE\u63A5\u6570\u636E\u5E93" aria-hidden="true">#</a></h2><p><a href="https://github.com/go-sql-driver/mysql" target="_blank" rel="noreferrer">https://github.com/go-sql-driver/mysql</a></p><h3 id="_5-1-\u5B89\u88C5-mysql-\u9A71\u52A8" tabindex="-1">5.1. \u5B89\u88C5 mysql \u9A71\u52A8 <a class="header-anchor" href="#_5-1-\u5B89\u88C5-mysql-\u9A71\u52A8" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># \u4E0B\u8F7D\u4E0B\u7684\u5305\u5728 $GOPATH \u4E2D</span></span>
<span class="line"><span style="color:#A6ACCD;">go get -u github.com/go-sql-driver/mysql</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-2-\u7F16\u5199\u7A0B\u5E8F" tabindex="-1">5.2. \u7F16\u5199\u7A0B\u5E8F <a class="header-anchor" href="#_5-2-\u7F16\u5199\u7A0B\u5E8F" aria-hidden="true">#</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// mysql/testing-app/app.go</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">database/sql</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">log</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	_ </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/go-sql-driver/mysql</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Drivers:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> sql</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Drivers</span><span style="color:#89DDFF;">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	database </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">connectToDatabase</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">defer</span><span style="color:#A6ACCD;"> database</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;">// \u67E5\u8BE2\u590D\u6570\u884C</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">queryMultiUser</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">database</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;">// \u67E5\u8BE2\u4E00\u884C\u3002\u82E5\u6709\u590D\u6570\u884C\u9002\u914D\u6761\u4EF6\uFF0C\u5219\u53D6\u7B2C\u4E00\u884C</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">queryOneUser</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">database</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;">// \u63D2\u5165\u6570\u636E</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">insertRows</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">database</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">connectToDatabase</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">sql</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DB </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	database</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exception </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> sql</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Open</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mysql</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">root:password@tcp(localhost:3306)/sample</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> exception </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Unable to open connection to db.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> database</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">queryMultiUser</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">database </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">sql</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DB</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	results</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exception </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> database</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Query</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">select * from user_info</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> exception </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Error when fetching product table rows:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exception</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">defer</span><span style="color:#A6ACCD;"> results</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> results</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Next</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">			id   </span><span style="color:#C792EA;">int</span></span>
<span class="line"><span style="color:#A6ACCD;">			name </span><span style="color:#C792EA;">string</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">		exception </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> results</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Scan</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> exception </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Unable to parse row:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exception</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">		fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">One of many, ID: %d, Name: &#39;%s&#39;</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> id</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> name</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">queryOneUser</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">database </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">sql</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DB</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">		id   </span><span style="color:#C792EA;">int</span></span>
<span class="line"><span style="color:#A6ACCD;">		name </span><span style="color:#C792EA;">string</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	exception </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> database</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">QueryRow</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Select * from user_info where id = 1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Scan</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> exception </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Unable to parse row:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exception</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Only one row, ID: %d, Name: &#39;%s&#39;</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> id</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> name</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">userStruct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	id   </span><span style="color:#C792EA;">int</span></span>
<span class="line"><span style="color:#A6ACCD;">	name </span><span style="color:#C792EA;">string</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">insertRows</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">database </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">sql</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DB</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	users </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;">userStruct</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Shamare</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Suzuran</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	statement</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exception </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> database</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Prepare</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">INSERT INTO user_info (id, name) VALUES (?, ?)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> exception </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Unable to prepare statement:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exception</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">defer</span><span style="color:#A6ACCD;"> statement</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> _</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">range</span><span style="color:#A6ACCD;"> users </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		_</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exception </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> statement</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Exec</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> exception </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Unable to prepare statement:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exception</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br></div></div>`,19),o=[e];function r(c,t,D,y,F,i){return a(),n("div",null,o)}const b=s(p,[["render",r]]);export{C as __pageData,b as default};
