import{_ as o,c as e,o as t,a3 as i}from"./chunks/framework.Cbi_dvob.js";const p=JSON.parse('{"title":"Rust | 更改 Windows Kits (SDK) 安装路径","description":"","frontmatter":{},"headers":[],"relativePath":"zh/programming/coding-memo/rust-change-windows-kits-root.md","filePath":"zh/programming/coding-memo/rust-change-windows-kits-root.md","lastUpdated":1727196971000}'),s={name:"zh/programming/coding-memo/rust-change-windows-kits-root.md"},a=i('<h1 id="rust-更改-windows-kits-sdk-安装路径" tabindex="-1">Rust | 更改 Windows Kits (SDK) 安装路径 <a class="header-anchor" href="#rust-更改-windows-kits-sdk-安装路径" aria-label="Permalink to &quot;Rust | 更改 Windows Kits (SDK) 安装路径&quot;">​</a></h1><h2 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h2><p>在 Windows 上安装 Rust 时会提示你要用 Visual Studio 安装 C++ desktop development 包，原因是 Rust 依赖于其中的 Windows SDK。但是按这种方式只能进行默认安装，而 Windows SDK 的默认安装会污染路径环境的问题。</p><p>这不是 Rust 特有的问题，如果你用 C++ 开发，也会遇到相同的问题。</p><h2 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to &quot;解决方案&quot;">​</a></h2><p>首先应该采用手动的方式安装 Windows SDK，安装器可以在 Windows 的<a href="https://developer.microsoft.com/en-us/windows/downloads/windows-sdk/" target="_blank" rel="noreferrer">官网</a>上下到。但是运行后会发现不允许修改默认安装路径。这时候需要修改注册表中 Windows Kits 的安装路径。</p><p>修改后 Windows SDK 的安装器就会将修改后的路径识别为默认路径。接着安装下去，完成后 Windows Kits 目录所在的路径就会和注册表修改后的路径一致。</p><p>我一开始想过手动移动 Windows Kits 目录，但是执行 Rust 的命令会报错说找不到 <code>Link.exe</code>，即便修改完注册表，再用 Visual Studio 安装一遍 C++ desktop development 也会报错说打不开 <code>kernel32.lib</code>。我最后尝试了上述方法才成功。</p><h3 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h3><ul><li><a href="https://stackoverflow.com/questions/44801241/change-windows-kit-common-installation-path" target="_blank" rel="noreferrer">change windows kit common installation path</a></li></ul><h2 id="操作流程" tabindex="-1">操作流程 <a class="header-anchor" href="#操作流程" aria-label="Permalink to &quot;操作流程&quot;">​</a></h2><ol><li>运行 regedit 打开注册表。</li><li>找到 <code>Computer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\Microsoft\\Windows Kits\\Installed Roots</code> 并选中。如果不存在则需要手动创建。</li><li>修改 <code>KitsRoot10</code> 为你期望的路径。如果存在多个类似字段则都需要修改。</li><li>从 Windows <a href="https://developer.microsoft.com/en-us/windows/downloads/windows-sdk/" target="_blank" rel="noreferrer">官网</a>下载 Windows SDK 安装器。</li><li>打开安装器安装 Windows SDK，此时的默认安装路径应为注册表中修改后的路径。</li><li>安装完毕后建议删除旧的 SDK。</li><li>执行 Rust 命令确认能否正常操作。</li></ol>',12),n=[a];function r(d,l,c,h,w,u){return t(),e("div",null,n)}const _=o(s,[["render",r]]);export{p as __pageData,_ as default};
